<router-outlet></router-outlet>

<div class="card centrar">
    <div class="container">
        <div class="centrar position-relative">
            <div class="row align-items-center mb-4" style="margin-top: -50px;">
                <p-button [routerLink]="['/patient/detail-patient',hash]" label="Regresar" icon="pi pi-arrow-left"
                    styleClass="p-button-sm p-button-danger" [style]="{ 'margin-right': '.6em' }"> </p-button>
                <div class="col-sm-8">
                    <h4 class="mb-2 text-primary">{{patient.fullNamePatient}} - {{indicator}}</h4>
                    <h4 class="mb-2 text-primary">{{ indicador }}</h4>
                </div>
                <div class="col-sm-4 text-end">
                    <img src="assets/images/fall-detector.png"
                        alt="Imagen Paciente" class="img-fluid rounded" style="max-height: 100px;">
                </div>
            </div>

            <div class="row align-items-end mb-4">

                <div class="col-md-3">
                    <label for="fechaInicio" class="form-label">Fecha de inicio</label>
                    <input type="date" id="fechaInicio" class="form-control" [(ngModel)]="fechaInicio">
                </div>
                <div class="col-md-3">
                    <label for="fechaFin" class="form-label">Fecha de fin</label>
                    <input type="date" id="fechaFin" class="form-control" [(ngModel)]="fechaFin">
                </div>
                <div class="col-md-2 text-end">
                    <button class="btn btn-outline-primary w-100 mt-3" (click)="filtrar()"
                        [disabled]="!fechaInicio || !fechaFin || (fechaInicio > fechaFin)" style="color: #F6901A;border-color: #F6901A;" >Filtrar</button>
                </div>
                <div *ngIf="fechaInicio && fechaFin && fechaInicio > fechaFin" class="text-danger mt-2">
                    La fecha de inicio debe ser menor o igual a la fecha de fin.
                </div>
            </div>


            <hr class="my-4">

            <div class="row">
                <div class="col-md-4 mb-4">
                    <h5 class="text-secondary">Resumen de Indicadores</h5>
                    <table class="table table-bordered table-hover text-center">
                        <thead class="table-light">
                            <tr>
                                <th>Fecha</th>
                                <th>Valor</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngIf="fallDetector.length === 0">
                                <td colspan="2" class="text-center text-muted">No hay registros disponibles.</td>
                            </tr>
                            <tr *ngFor="let item of fallDetector">
                                <td>{{ item.fecha }}</td>
                                <td>{{ item.description }}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="col-md-8">
                    <h5 class="text-secondary">Historial de Resultados</h5>
                    <div class="chart-container">
                        <canvas *ngIf="fallDetector.length > 0" #myChartCanvas></canvas>

                    </div>
                </div>
            </div>

        </div>
    </div>

</div>